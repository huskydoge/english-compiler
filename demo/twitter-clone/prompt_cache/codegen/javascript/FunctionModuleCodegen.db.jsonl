{"prompt":"Code indentation should be done with tabs (unless minified).\nThe javascript module can be described with the following details\n\nmodule name: db\nModule Type: CJS\nDocumentation Style: JSDoc\n\nmodule textual description :\n```\nUsing an inmemory sqlite3 module, as a database store twitter messages\n\nWhere each tweet consist of the following parameters\n- userHandle\n- message\n- timestamp (unixtimestamp in ms)\n\nProvide a javascript module, with the following async functions exposed.\nThe functions should not be passing a DB instance, as that should be initialized once, and stored for reuse globally.\n\n## setupDB \nDoes any setup if required. Including table or datastructures.\nThe database should be seeded with 5 example tweets on setup.\n\n## addTweet \nSave a tweet with a userHandle, and message.\n\n## listTweets\nWhich returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\n```\n\ndeveloper:\nPlease generate the javascript module code, with the complete implementation according the spec. Without comments.\n\nAI assistant:\n```\n","completion":"const sqlite3 = require('sqlite3').verbose();\n\nlet db;\n\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:', (err) => {\n    if (err) {\n      console.error(err.message);\n    }\n    console.log('Connected to the in-memory SQlite database.');\n  });\n\n  db.run(`CREATE TABLE IF NOT EXISTS tweets (\n    userHandle TEXT NOT NULL,\n    message TEXT NOT NULL,\n    timestamp INTEGER NOT NULL\n  )`);\n\n  // Seed the database with 5 example tweets\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES\n    ('user1', 'message1', 1599454545000),\n    ('user2', 'message2', 1599454546000),\n    ('user3', 'message3', 1599454547000),\n    ('user4', 'message4', 1599454548000),\n    ('user5', 'message5', 1599454549000)`);\n};\n\nconst addTweet = async (userHandle, message) => {\n  const timestamp = Date.now();\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES (?, ?, ?)`, [userHandle, message, timestamp]);\n};\n\nconst listTweets = async () => {\n  return new Promise((resolve, reject) => {\n    db.all(`SELECT userHandle, message, timestamp FROM tweets ORDER BY timestamp DESC`, (err, rows) => {\n      if (err) {\n        reject(err);\n      }\n      resolve(rows);\n    });\n  });\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```"}
{"prompt":"Code indentation should be done with tabs (unless minified).\nThe javascript module can be described with the following details\n\nmodule name: db\nModule Type: CJS\nDocumentation Style: JSDoc\n\nmodule textual description :\n```\nUsing an inmemory sqlite3 module, as a database store twitter messages\n\nWhere each tweet consist of the following parameters\n- userHandle\n- message\n- timestamp (unixtimestamp in ms)\n\nProvide a javascript module, with the following async functions exposed.\nThe functions should not be passing a DB instance, as that should be initialized once, and stored for reuse globally.\n\n## setupDB \nDoes any setup if required. Including table or datastructures.\nThe database should be seeded with 5 example tweets on setup.\n\n## addTweet \nSave a tweet with a userHandle, and message.\n\n## listTweets\nWhich returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\n```\n\ndeveloper:\nPlease generate the javascript module code, with the complete implementation according the spec. Without comments.\n\nAI assistant:\n```\nconst sqlite3 = require('sqlite3').verbose();\n\nlet db;\n\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:', (err) => {\n    if (err) {\n      console.error(err.message);\n    }\n    console.log('Connected to the in-memory SQlite database.');\n  });\n\n  db.run(`CREATE TABLE IF NOT EXISTS tweets (\n    userHandle TEXT NOT NULL,\n    message TEXT NOT NULL,\n    timestamp INTEGER NOT NULL\n  )`);\n\n  // Seed the database with 5 example tweets\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES\n    ('user1', 'message1', 1599454545000),\n    ('user2', 'message2', 1599454546000),\n    ('user3', 'message3', 1599454547000),\n    ('user4', 'message4', 1599454548000),\n    ('user5', 'message5', 1599454549000)`);\n};\n\nconst addTweet = async (userHandle, message) => {\n  const timestamp = Date.now();\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES (?, ?, ?)`, [userHandle, message, timestamp]);\n};\n\nconst listTweets = async () => {\n  return new Promise((resolve, reject) => {\n    db.all(`SELECT userHandle, message, timestamp FROM tweets ORDER BY timestamp DESC`, (err, rows) => {\n      if (err) {\n        reject(err);\n      }\n      resolve(rows);\n    });\n  });\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```\n\ndeveloper:\nPlease improve the code. Improve readability.\nFix any potential bugs, and handle edge cases.\nWhile simplifying and reducing the number of code steps and lines involved if possible.\n\nAI assistant:\n```\n","completion":"const sqlite3 = require('sqlite3').verbose();\n\nlet db;\n\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:', (err) => {\n    if (err) {\n      console.error(err.message);\n    }\n    console.log('Connected to the in-memory SQlite database.');\n  });\n\n  db.run(`CREATE TABLE IF NOT EXISTS tweets (\n    userHandle TEXT NOT NULL,\n    message TEXT NOT NULL,\n    timestamp INTEGER NOT NULL\n  )`);\n\n  // Seed the database with 5 example tweets\n  const seedData = [\n    ['user1', 'message1', 1599454545000],\n    ['user2', 'message2', 1599454546000],\n    ['user3', 'message3', 1599454547000],\n    ['user4', 'message4', 1599454548000],\n    ['user5', 'message5', 1599454549000]\n  ];\n  const placeholders = seedData.map(() => '(?, ?, ?)').join(',');\n  const values = seedData.reduce((acc, curr) => acc.concat(curr), []);\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES ${placeholders}`, values);\n};\n\nconst addTweet = async (userHandle, message) => {\n  const timestamp = Date.now();\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES (?, ?, ?)`, [userHandle, message, timestamp]);\n};\n\nconst listTweets = async () => {\n  return new Promise((resolve, reject) => {\n    db.all(`SELECT userHandle, message, timestamp FROM tweets ORDER BY timestamp DESC`, (err, rows) => {\n      if (err) {\n        reject(err);\n      }\n      resolve(rows);\n    });\n  });\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```"}
{"prompt":"Code indentation should be done with tabs (unless minified).\nThe javascript module can be described with the following details\n\nmodule name: db\nModule Type: CJS\nDocumentation Style: JSDoc\n\nmodule textual description :\n```\nUsing an inmemory sqlite3 module, as a database store twitter messages\n\nWhere each tweet consist of the following parameters\n- userHandle\n- message\n- timestamp (unixtimestamp in ms)\n\nProvide a javascript module, with the following async functions exposed.\nThe functions should not be passing a DB instance, as that should be initialized once, and stored for reuse globally.\n\n## setupDB \nDoes any setup if required. Including table or datastructures.\nThe database should be seeded with 5 example tweets on setup.\n\n## addTweet \nSave a tweet with a userHandle, and message.\n\n## listTweets\nWhich returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\n```\n\ndeveloper:\nPlease generate the javascript module code\n\nAI assistant:\n```\nconst sqlite3 = require('sqlite3').verbose();\n\nlet db;\n\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:', (err) => {\n    if (err) {\n      console.error(err.message);\n    }\n    console.log('Connected to the in-memory SQlite database.');\n  });\n\n  db.run(`CREATE TABLE IF NOT EXISTS tweets (\n    userHandle TEXT NOT NULL,\n    message TEXT NOT NULL,\n    timestamp INTEGER NOT NULL\n  )`);\n\n  // Seed the database with 5 example tweets\n  const seedData = [\n    ['user1', 'message1', 1599454545000],\n    ['user2', 'message2', 1599454546000],\n    ['user3', 'message3', 1599454547000],\n    ['user4', 'message4', 1599454548000],\n    ['user5', 'message5', 1599454549000]\n  ];\n  const placeholders = seedData.map(() => '(?, ?, ?)').join(',');\n  const values = seedData.reduce((acc, curr) => acc.concat(curr), []);\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES ${placeholders}`, values);\n};\n\nconst addTweet = async (userHandle, message) => {\n  const timestamp = Date.now();\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES (?, ?, ?)`, [userHandle, message, timestamp]);\n};\n\nconst listTweets = async () => {\n  return new Promise((resolve, reject) => {\n    db.all(`SELECT userHandle, message, timestamp FROM tweets ORDER BY timestamp DESC`, (err, rows) => {\n      if (err) {\n        reject(err);\n      }\n      resolve(rows);\n    });\n  });\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```\n\ndeveloper:\nPlease improve the code, and add code comments, including detailed documentation for all functions.\nSimplifying and reducing the number of code steps and lines involved if possible.\nAdd code comment inside the function, to describe the process.\nFully explain and describe in detail any regex that is used.\n\nAI assistant:\n```\n","completion":"const sqlite3 = require('sqlite3').verbose();\n\nlet db;\n\n/**\n * Setup the in-memory sqlite3 database\n *\n * @returns {Promise<void>}\n */\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:', (err) => {\n    if (err) {\n      console.error(err.message);\n    }\n    console.log('Connected to the in-memory SQlite database.');\n  });\n\n  db.run(`CREATE TABLE IF NOT EXISTS tweets (\n    userHandle TEXT NOT NULL,\n    message TEXT NOT NULL,\n    timestamp INTEGER NOT NULL\n  )`);\n\n  // Seed the database with 5 example tweets\n  const seedData = [\n    ['user1', 'message1', 1599454545000],\n    ['user2', 'message2', 1599454546000],\n    ['user3', 'message3', 1599454547000],\n    ['user4', 'message4', 1599454548000],\n    ['user5', 'message5', 1599454549000]\n  ];\n  const placeholders = seedData.map(() => '(?, ?, ?)').join(',');\n  const values = seedData.reduce((acc, curr) => acc.concat(curr), []);\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES ${placeholders}`, values);\n};\n\n/**\n * Add a tweet to the database\n *\n * @param {string} userHandle - The user handle of the tweet\n * @param {string} message - The message of the tweet\n * @returns {Promise<void>}\n */\nconst addTweet = async (userHandle, message) => {\n  const timestamp = Date.now();\n  db.run(`INSERT INTO tweets (userHandle, message, timestamp) VALUES (?, ?, ?)`, [userHandle, message, timestamp]);\n};\n\n/**\n * List all tweets from the database\n *\n * @returns {Promise<Array>} - An array of tweets\n */\nconst listTweets = async () => {\n  return new Promise((resolve, reject) => {\n    db.all(`SELECT userHandle, message, timestamp FROM tweets ORDER BY timestamp DESC`, (err, rows) => {\n      if (err) {\n        reject(err);\n      }\n      resolve(rows);\n    });\n  });\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```"}
{"prompt":"Code indentation should be done with tabs (unless minified).\nThe javascript module can be described with the following details\n\nmodule name: db\nModule Type: CJS\nDocumentation Style: JSDoc\n\nmodule textual description :\n```\nUsing an inmemory sqlite3 module, as a database store twitter messages\n\nWhere each tweet consist of the following parameters\n- userHandle\n- message\n- timestamp (unixtimestamp in ms)\n\nProvide a javascript module, with the following async functions exposed.\nThe functions should not be passing a DB instance, as that should be initialized once, and stored for reuse globally.\n\n## setupDB \nDoes any setup if required. Including table or datastructures.\nThe database should be seeded with 5 example tweets on setup.\n\n## addTweet \nSave a tweet with a userHandle, and message.\n\n## listTweets\nWhich returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\n```\n\ndeveloper:\nThe code relative to the test file, will be at: ../../src/db.js\nPlease generate the javascript module unit test file, with multiple scenerios, according to the spec\nUse the assert library for the test\n\nAI assistant:\n```\n","completion":"// db.test.js\n\nconst assert = require('assert');\nconst db = require('../../src/db');\n\ndescribe('db', () => {\n  beforeEach(async () => {\n    await db.setupDB();\n  });\n\n  describe('addTweet', () => {\n    it('should add a tweet with a userHandle and message', async () => {\n      const userHandle = 'testUser';\n      const message = 'This is a test message';\n      const tweet = await db.addTweet(userHandle, message);\n      assert.equal(tweet.userHandle, userHandle);\n      assert.equal(tweet.message, message);\n    });\n  });\n\n  describe('listTweets', () => {\n    it('should return a list of tweets, ordered from newest to oldest', async () => {\n      const tweets = await db.listTweets();\n      assert.equal(tweets.length, 5);\n      assert.equal(tweets[0].userHandle, 'testUser');\n      assert.equal(tweets[0].message, 'This is a test message');\n      assert.equal(tweets[1].userHandle, 'testUser2');\n      assert.equal(tweets[1].message, 'This is another test message');\n    });\n  });\n});\n```"}
{"prompt":"Code indentation should be done with tabs (unless minified).\nThe javascript module can be described with the following details\n\nmodule name: db\nModule Type: CJS\nDocumentation Style: JSDoc\n\nmodule textual description :\n```\nUsing an inmemory sqlite3 module, as a database store twitter messages\n\nWhere each tweet consist of the following parameters\n- userHandle\n- message\n- timestamp (unixtimestamp in ms)\n\nProvide a javascript module, with the following async functions exposed.\nThe functions should not be passing a DB instance, as that should be initialized once, and stored for reuse globally.\n\n## setupDB \nDoes any setup if required. Including table or datastructures.\nThe database should be seeded with 5 example tweets on setup.\n\n## addTweet \nSave a tweet with a userHandle, and message.\n\n## listTweets\nWhich returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\nTweets from the userHandle \"elonmusk\", should be priotized above all tweets (as per the Feb-2023 changes).\n```\n\ndeveloper:\nPlease generate the javascript module code, with the complete implementation according the spec. Without comments.\n\nAI assistant:\n```\n","completion":"const sqlite3 = require('sqlite3');\n\nlet db;\n\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:');\n  await db.run('CREATE TABLE tweets (userHandle TEXT, message TEXT, timestamp INTEGER)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 1\", 1599454545000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 2\", 1599454546000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 3\", 1599454547000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 4\", 1599454548000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 5\", 1599454549000)');\n};\n\nconst addTweet = async (userHandle, message) => {\n  await db.run('INSERT INTO tweets VALUES (?, ?, ?)', [userHandle, message, Date.now()]);\n};\n\nconst listTweets = async () => {\n  const tweets = await db.all('SELECT * FROM tweets ORDER BY timestamp DESC');\n  const elonTweets = tweets.filter(tweet => tweet.userHandle === 'elonmusk');\n  const otherTweets = tweets.filter(tweet => tweet.userHandle !== 'elonmusk');\n  return [...elonTweets, ...otherTweets];\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```"}
{"prompt":"Code indentation should be done with tabs (unless minified).\nThe javascript module can be described with the following details\n\nmodule name: db\nModule Type: CJS\nDocumentation Style: JSDoc\n\nmodule textual description :\n```\nUsing an inmemory sqlite3 module, as a database store twitter messages\n\nWhere each tweet consist of the following parameters\n- userHandle\n- message\n- timestamp (unixtimestamp in ms)\n\nProvide a javascript module, with the following async functions exposed.\nThe functions should not be passing a DB instance, as that should be initialized once, and stored for reuse globally.\n\n## setupDB \nDoes any setup if required. Including table or datastructures.\nThe database should be seeded with 5 example tweets on setup.\n\n## addTweet \nSave a tweet with a userHandle, and message.\n\n## listTweets\nWhich returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\nTweets from the userHandle \"elonmusk\", should be priotized above all tweets (as per the Feb-2023 changes).\n```\n\ndeveloper:\nPlease generate the javascript module code, with the complete implementation according the spec. Without comments.\n\nAI assistant:\n```\nconst sqlite3 = require('sqlite3');\n\nlet db;\n\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:');\n  await db.run('CREATE TABLE tweets (userHandle TEXT, message TEXT, timestamp INTEGER)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 1\", 1599454545000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 2\", 1599454546000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 3\", 1599454547000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 4\", 1599454548000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 5\", 1599454549000)');\n};\n\nconst addTweet = async (userHandle, message) => {\n  await db.run('INSERT INTO tweets VALUES (?, ?, ?)', [userHandle, message, Date.now()]);\n};\n\nconst listTweets = async () => {\n  const tweets = await db.all('SELECT * FROM tweets ORDER BY timestamp DESC');\n  const elonTweets = tweets.filter(tweet => tweet.userHandle === 'elonmusk');\n  const otherTweets = tweets.filter(tweet => tweet.userHandle !== 'elonmusk');\n  return [...elonTweets, ...otherTweets];\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```\n\ndeveloper:\nPlease improve the code. Improve readability.\nFix any potential bugs, and handle edge cases.\nWhile simplifying and reducing the number of code steps and lines involved if possible.\n\nAI assistant:\n```\n","completion":"const sqlite3 = require('sqlite3');\n\nlet db;\n\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:');\n  await db.run('CREATE TABLE tweets (userHandle TEXT, message TEXT, timestamp INTEGER)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 1\", 1599454545000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 2\", 1599454546000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 3\", 1599454547000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 4\", 1599454548000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 5\", 1599454549000)');\n};\n\nconst addTweet = async (userHandle, message) => {\n  await db.run('INSERT INTO tweets VALUES (?, ?, ?)', [userHandle, message, Date.now()]);\n};\n\nconst listTweets = async () => {\n  const tweets = await db.all('SELECT * FROM tweets ORDER BY timestamp DESC');\n  const elonTweets = tweets.filter(tweet => tweet.userHandle === 'elonmusk');\n  const otherTweets = tweets.filter(tweet => tweet.userHandle !== 'elonmusk');\n  return [...elonTweets, ...otherTweets].map(tweet => ({\n    userHandle: tweet.userHandle,\n    message: tweet.message,\n    timestamp: tweet.timestamp\n  }));\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```"}
{"prompt":"Code indentation should be done with tabs (unless minified).\nThe javascript module can be described with the following details\n\nmodule name: db\nModule Type: CJS\nDocumentation Style: JSDoc\n\nmodule textual description :\n```\nUsing an inmemory sqlite3 module, as a database store twitter messages\n\nWhere each tweet consist of the following parameters\n- userHandle\n- message\n- timestamp (unixtimestamp in ms)\n\nProvide a javascript module, with the following async functions exposed.\nThe functions should not be passing a DB instance, as that should be initialized once, and stored for reuse globally.\n\n## setupDB \nDoes any setup if required. Including table or datastructures.\nThe database should be seeded with 5 example tweets on setup.\n\n## addTweet \nSave a tweet with a userHandle, and message.\n\n## listTweets\nWhich returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\nTweets from the userHandle \"elonmusk\", should be priotized above all tweets (as per the Feb-2023 changes).\n```\n\ndeveloper:\nPlease generate the javascript module code\n\nAI assistant:\n```\nconst sqlite3 = require('sqlite3');\n\nlet db;\n\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:');\n  await db.run('CREATE TABLE tweets (userHandle TEXT, message TEXT, timestamp INTEGER)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 1\", 1599454545000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 2\", 1599454546000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 3\", 1599454547000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 4\", 1599454548000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 5\", 1599454549000)');\n};\n\nconst addTweet = async (userHandle, message) => {\n  await db.run('INSERT INTO tweets VALUES (?, ?, ?)', [userHandle, message, Date.now()]);\n};\n\nconst listTweets = async () => {\n  const tweets = await db.all('SELECT * FROM tweets ORDER BY timestamp DESC');\n  const elonTweets = tweets.filter(tweet => tweet.userHandle === 'elonmusk');\n  const otherTweets = tweets.filter(tweet => tweet.userHandle !== 'elonmusk');\n  return [...elonTweets, ...otherTweets].map(tweet => ({\n    userHandle: tweet.userHandle,\n    message: tweet.message,\n    timestamp: tweet.timestamp\n  }));\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```\n\ndeveloper:\nPlease improve the code, and add code comments, including detailed documentation for all functions.\nSimplifying and reducing the number of code steps and lines involved if possible.\nAdd code comment inside the function, to describe the process.\nFully explain and describe in detail any regex that is used.\n\nAI assistant:\n```\n","completion":"const sqlite3 = require('sqlite3');\n\n/**\n * @module db\n * @description Using an inmemory sqlite3 module, as a database store twitter messages\n * Where each tweet consist of the following parameters\n * - userHandle\n * - message\n * - timestamp (unixtimestamp in ms)\n */\n\nlet db;\n\n/**\n * @function setupDB\n * @description Does any setup if required. Including table or datastructures.\n * The database should be seeded with 5 example tweets on setup.\n */\nconst setupDB = async () => {\n  db = new sqlite3.Database(':memory:');\n  await db.run('CREATE TABLE tweets (userHandle TEXT, message TEXT, timestamp INTEGER)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 1\", 1599454545000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 2\", 1599454546000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 3\", 1599454547000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 4\", 1599454548000)');\n  await db.run('INSERT INTO tweets VALUES (\"elonmusk\", \"Test tweet 5\", 1599454549000)');\n};\n\n/**\n * @function addTweet\n * @description Save a tweet with a userHandle, and message.\n * @param {string} userHandle - The user handle of the tweet\n * @param {string} message - The message of the tweet\n */\nconst addTweet = async (userHandle, message) => {\n  await db.run('INSERT INTO tweets VALUES (?, ?, ?)', [userHandle, message, Date.now()]);\n};\n\n/**\n * @function listTweets\n * @description Returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\n * Tweets from the userHandle \"elonmusk\", should be priotized above all tweets (as per the Feb-2023 changes).\n * @returns {array} An array of tweets\n */\nconst listTweets = async () => {\n  const tweets = await db.all('SELECT * FROM tweets ORDER BY timestamp DESC');\n  const elonTweets = tweets.filter(tweet => tweet.userHandle === 'elonmusk');\n  const otherTweets = tweets.filter(tweet => tweet.userHandle !== 'elonmusk');\n  return [...elonTweets, ...otherTweets].map(tweet => ({\n    userHandle: tweet.userHandle,\n    message: tweet.message,\n    timestamp: tweet.timestamp\n  }));\n};\n\nmodule.exports = {\n  setupDB,\n  addTweet,\n  listTweets\n};\n```"}
{"prompt":"Code indentation should be done with tabs (unless minified).\nThe javascript module can be described with the following details\n\nmodule name: db\nModule Type: CJS\nDocumentation Style: JSDoc\n\nmodule textual description :\n```\nUsing an inmemory sqlite3 module, as a database store twitter messages\n\nWhere each tweet consist of the following parameters\n- userHandle\n- message\n- timestamp (unixtimestamp in ms)\n\nProvide a javascript module, with the following async functions exposed.\nThe functions should not be passing a DB instance, as that should be initialized once, and stored for reuse globally.\n\n## setupDB \nDoes any setup if required. Including table or datastructures.\nThe database should be seeded with 5 example tweets on setup.\n\n## addTweet \nSave a tweet with a userHandle, and message.\n\n## listTweets\nWhich returns a list of tweets, containing the userHandle, message, and timestamps. Order the tweets from newest to oldest.\nTweets from the userHandle \"elonmusk\", should be priotized above all tweets (as per the Feb-2023 changes).\n```\n\ndeveloper:\nThe code relative to the test file, will be at: ../../src/db.js\nPlease generate the javascript module unit test file, with multiple scenerios, according to the spec\nUse the assert library for the test\n\nAI assistant:\n```\n","completion":"const assert = require('assert');\n\ndescribe('db', () => {\n  let db;\n\n  beforeEach(() => {\n    db = require('../../src/db');\n  });\n\n  describe('setupDB', () => {\n    it('should setup the database', async () => {\n      await db.setupDB();\n      // assert that the database is setup\n    });\n\n    it('should seed the database with 5 example tweets', async () => {\n      await db.setupDB();\n      // assert that the database is seeded with 5 example tweets\n    });\n  });\n\n  describe('addTweet', () => {\n    it('should save a tweet with a userHandle and message', async () => {\n      await db.addTweet('userHandle', 'message');\n      // assert that the tweet is saved\n    });\n  });\n\n  describe('listTweets', () => {\n    it('should return a list of tweets, containing the userHandle, message, and timestamps', async () => {\n      const tweets = await db.listTweets();\n      // assert that the list of tweets contains the userHandle, message, and timestamps\n    });\n\n    it('should order the tweets from newest to oldest', async () => {\n      const tweets = await db.listTweets();\n      // assert that the tweets are ordered from newest to oldest\n    });\n\n    it('should prioritize tweets from the userHandle \"elonmusk\"', async () => {\n      const tweets = await db.listTweets();\n      // assert that the tweets from the userHandle \"elonmusk\" are prioritized\n    });\n  });\n});\n```"}
